<div class="container-fluid" >
<p-dialog *ngIf="loading"  header="loading" [closeOnEscape]="true" [showHeader]="true" [modal]="true" [(visible)]="loading" [style]="{width: '50vw'}">
    <p-progressSpinner class="justify-content-center"  styleClass="w-4rem h-4rem" strokeWidth="8" fill="var(--surface-ground)" animationDuration="2s"></p-progressSpinner>
</p-dialog>

<p-dialog     [resizable]="true" 
 *ngIf="tabFieldEdit"  header="{{tab.name}}"   [closeOnEscape]="true" [showHeader]="true" [modal]="true" [(visible)]="tabFieldEdit" [style]="{width: '80vw'}">
   
   
    <p-table  #dt1 [value]="feildRows" scrollHeight="500px"   dataKey="id"  editMode="row"  [paginator]="true"  selectionMode="single" [rows]="10"  styleClass="p-datatable-gridlines" [showCurrentPageReport]="true" responsiveLayout="scroll"
     currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries" [rowsPerPageOptions]="[10,25,50]"  [reorderableColumns]="true"   >
      <ng-template pTemplate="header">
          <tr pFrozenColumn>
              <th  pReorderableColumn pSortableColumn=""  [style]="{'width':'auto'}" >
                <div class="d-flex flex-row">
                  <div class="p-1" >    <p-columnFilter  type="text" field="name"  display="menu">
                  </p-columnFilter></div>
                  <div class="p-1" style="margin-top: 2%;">name </div>
                  <div class="p-1"  ><p-sortIcon  field="name" ></p-sortIcon></div>
                </div>

              </th>
              <th  pReorderableColumn pSortableColumn=""  [style]="{'width':'auto'}" >
                <div class="d-flex flex-row">
                  <div class="p-1" >    <p-columnFilter  type="text" field="name_ar"  display="menu">
                  </p-columnFilter></div>
                  <div class="p-1" style="margin-top: 2%;">name ar </div>
                  <div class="p-1"  ><p-sortIcon  field="name_ar" ></p-sortIcon></div>
                </div>

              </th>
              <th  pReorderableColumn pSortableColumn=""  [style]="{'width':'auto'}" >
                <div class="d-flex flex-row">
                  <div class="p-1" >    <p-columnFilter  type="boolean" field="isGridView"  display="menu">
                  </p-columnFilter></div>
                  <div class="p-1" style="margin-top: 2%;">isGridView</div>
                  <div class="p-1"  ><p-sortIcon  field="isGridView" ></p-sortIcon></div>
                </div>

              </th>
              <th  pReorderableColumn pSortableColumn=""  [style]="{'width':'auto'}" >
                <div class="d-flex flex-row">
                  <div class="p-1" >    <p-columnFilter  type="boolean" field="isFormView"  display="menu">
                  </p-columnFilter></div>
                  <div class="p-1" style="margin-top: 2%;">isFormView</div>
                  <div class="p-1"  ><p-sortIcon  field="isFormView" ></p-sortIcon></div>
                </div>

              </th>
              <th  pReorderableColumn pSortableColumn=""  [style]="{'width':'auto'}" >
                <div class="d-flex flex-row">
                  <div class="p-1" >    <p-columnFilter  type="boolean" field="isDetailView"  display="menu">
                  </p-columnFilter></div>
                  <div class="p-1" style="margin-top: 2%;">isDetailView</div>
                  <div class="p-1"  ><p-sortIcon  field="isDetailView" ></p-sortIcon></div>
                </div>

              </th>
              <th style="width:10%"></th>

          </tr>
      </ng-template>
      <ng-template style="font-size: 9px;" class="GridTr" pTemplate="body" let-row let-editing="editing"  let-ri="rowIndex">
          <tr   [style] = "'cursor:pointer;'"  [pEditableRow]="row" > 
            <td  style="text-align:center;">
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input  class="form-control"
                            pInputText type="text" 
                            [(ngModel)]="row.name" />
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{row.name}}
                    </ng-template>
                </p-cellEditor>

            </td>
            <td  style="text-align:center;">
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <input   class="form-control"
                            pInputText type="text" 
                            [(ngModel)]="row.name_ar" />
                    </ng-template>
                    <ng-template pTemplate="output">
                        {{row.name_ar}}
                    </ng-template>
                </p-cellEditor>
              </td>
              <td  style="text-align:center;">
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <p-inputSwitch class="center" [(ngModel)]="row.isGridView"   ></p-inputSwitch>

                    </ng-template>
                    <ng-template pTemplate="output">
                        <i class="pi" [ngClass]="{'true-icon pi-check-circle': row.isGridView, 'false-icon pi-times-circle': !row.isGridView}"></i>
                    </ng-template>
                </p-cellEditor>
              </td>
              <td  style="text-align:center;">
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <p-inputSwitch class="center" [(ngModel)]="row.isFormview"   ></p-inputSwitch>
                    </ng-template>
                    <ng-template pTemplate="output">
                        <i class="pi" [ngClass]="{'true-icon pi-check-circle': row.isFormview, 'false-icon pi-times-circle': !row.isFormview}"></i>

                    </ng-template>
                </p-cellEditor>
              </td>
              <td  style="text-align:center;">
                <p-cellEditor>
                    <ng-template pTemplate="input">
                        <p-inputSwitch class="center" [(ngModel)]="row.isDetailView"></p-inputSwitch>

                    </ng-template>
                    <ng-template pTemplate="output">
                        <i class="pi" [ngClass]="{'true-icon pi-check-circle': row.isDetailView, 'false-icon pi-times-circle': !row.isDetailView}"></i>

                    </ng-template>
                </p-cellEditor>
              </td>
              <td>
                <div class="flex align-items-center justify-content-center gap-2">
                    <button 
                        *ngIf="!editing" 
                        pButton 
                        pRipple 
                        type="button" 
                        pInitEditableRow 
                        icon="pi pi-pencil" 
                        (click)="onRowEditInit(row)" 
                        class="p-button-rounded p-button-text">
                    </button>
                    <button 
                        *ngIf="editing" 
                        pButton 
                        pRipple 
                        type="button" 
                        pSaveEditableRow 
                        icon="pi pi-check" 
                        (click)="onRowEditSave(row)" 
                        class="p-button-rounded p-button-text p-button-success mr-2">
                    </button>
                    <button 
                        *ngIf="editing" 
                        pButton pRipple 
                        type="button" 
                        pCancelEditableRow 
                        icon="pi pi-times" 
                        (click)="onRowEditCancel(row, ri)" 
                        class="p-button-rounded p-button-text p-button-danger">
                    </button>
                </div>
            </td>
          </tr>
      </ng-template>
  </p-table>
</p-dialog>

<div class="row" *ngIf="isSystemAdmin()" style="margin-bottom: 10px;">
    <div class="col-11"></div>

    <div class="col-1">
<button (click)="tabEditAction()" class="btn btn-info" pRipple pButton icon="pi pi-pencil" style="float: right;"></button> <br /><br />
</div>

</div>


<list-to-list *ngIf="false"></list-to-list>

<sys-window-grid *ngIf="isGridView && !isFormView && !isDetailView && recordId==0" [(tab)] = "tab"  (tabMode) = "changeTabMode($event)" [columns] = "tab.gridFields" [isMasterTab]="isMasterTab" [(window)] = "window"></sys-window-grid>

<sys-window-form *ngIf="!isGridView && (isFormView || isDetailView)" [(currentRow)] = "currentRow" [(detailsView)] ="isDetailView" [(formView)] = "isFormView"   [isMasterTab]="isMasterTab"  [(tab)] = "tab" [columns] = "tab.formFields" (tabMode) = "changeTabMode($event)" [(window)] = "window"></sys-window-form>

</div>